<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>대여 신청 관리자 대시보드</title>
  <!-- Firebase App (compat 버전) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <!-- Firestore (compat 버전) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>
</head>
<body>
  <h1>대여 신청 관리자 대시보드</h1>
  <ul id="rentalList"></ul>

  <script>
    // Firebase 구성 객체 (본인 프로젝트의 설정 값으로 변경하세요)
      const firebaseConfig = {
      apiKey: "AIzaSyDqGToBXg...",
      authDomain: "yonseirent-setup.firebaseapp.com",
      projectId: "yonseirent-setup",
      storageBucket: "yonseirent-setup.firebasestorage.app",
      messagingSenderId: "1072524969376",
      appId: "1:1072524969376:web:33d1c55ca9f08da93e10c5",
      measurementId: "G-8G1D43NXMW"
    };

    // Firebase 초기화
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 관리자 대시보드의 리스트 요소
    const rentalList = document.getElementById('rentalList');

    // 'rentals' 컬렉션의 실시간 리스너 등록
    db.collection('rentals').orderBy('createdAt', 'desc').onSnapshot(snapshot => {
      // 기존 목록을 초기화(덮어쓰기)
      rentalList.innerHTML = '';

      // 컬렉션 내의 각 문서를 순회하며 목록에 추가
      snapshot.forEach(doc => {
        const data = doc.data();
        const listItem = document.createElement('li');
        listItem.textContent = `이름: ${data.userName} / 기자재: ${data.equipment} / 대여 날짜: ${data.rentDate}`;
        rentalList.appendChild(listItem);
      });
    }, err => {
      console.error('데이터 수신 에러:', err);
    });
  </script>
</body>
</html>
