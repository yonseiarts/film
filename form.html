<!-- 1단계: 장비 선택 -->
<div id="step1">
  <h2 class="text-xl font-bold mb-2">장비 선택</h2>
  <!-- 탭 버튼 -->
  <div class="flex space-x-2 mb-4">
    <button class="tab-button px-4 py-1 border rounded active" data-tab="camera">카메라</button>
    <button class="tab-button px-4 py-1 border rounded" data-tab="lighting">조명</button>
    <button class="tab-button px-4 py-1 border rounded" data-tab="sound">사운드</button>
    <button class="tab-button px-4 py-1 border rounded" data-tab="editing">편집실</button>
  </div>
  <!-- 장비 목록 -->
  <div id="equipment-list" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"></div>

  <div id="selected-section" class="mt-6 hidden">
    <h3 class="font-medium mb-2">선택된 장비</h3>
    <ul id="selected-items" class="list-disc ml-5 text-sm text-gray-700"></ul>
  </div>

  <div class="flex justify-between mt-6">
    <!-- 홈으로 버튼 -->
    <button onclick="goHome()" class="text-blue-600 text-sm">홈으로</button>

    <!-- 다음단계 (2) -->
    <button id="toStep2" onclick="goToStep(2)" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 hidden">
      다음 단계 →
    </button>
  </div>
</div>

<script>
  let selected = []; // 선택된 장비 저장

  // 탭 버튼 클릭 시 장비 목록 렌더링
  document.querySelectorAll('.tab-button').forEach(button => {
    button.addEventListener('click', function() {
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });

      this.classList.add('active');
      const tabName = this.getAttribute('data-tab');
      renderEquipment(tabName);
    });
  });

  function renderEquipment(tab) {
    const equipmentData = {
      camera: [
        { id: "1", name: "Sony FX3", image: "https://via.placeholder.com/80?text=Sony+FX3" },
        { id: "2", name: "Canon EOS R5", image: "https://via.placeholder.com/80?text=Canon+R5" }
      ],
      lighting: [
        { id: "3", name: "ARRI SkyPanel", image: "https://via.placeholder.com/80?text=SkyPanel" }
      ],
      sound: [
        { id: "4", name: "Sennheiser MKH", image: "https://via.placeholder.com/80?text=MKH" }
      ],
      editing: [
        { id: "5", name: "편집실 1", image: "https://via.placeholder.com/80?text=%ED%8E%B8%EC%A7%91%EC%8B%A4+1" },
        { id: "6", name: "편집실 2", image: "https://via.placeholder.com/80?text=%ED%8E%B8%EC%A7%91%EC%8B%A4+2" }
      ]
    };

    const list = document.getElementById("equipment-list");
    list.innerHTML = "";

    equipmentData[tab].forEach(item => {
      const div = document.createElement("div");
      div.className = "equipment border p-4 rounded flex items-center cursor-pointer";
      div.innerHTML = `
        <img src="${item.image}" alt="${item.name}" class="w-14 h-14 rounded mr-4"/>
        <strong>${item.name}</strong>
      `;
      div.onclick = () => toggleItem(item, div);
      
      // 선택된 장비는 selected 클래스 추가
      if (selected.some(s => s.id === item.id)) {
        div.classList.add("selected");
      }
      
      list.appendChild(div);
    });
  }

  function toggleItem(item, el) {
    // 이미 선택된 장비는 선택 해제
    const found = selected.find(s => s.id === item.id);
    if (found) {
      selected = selected.filter(s => s.id !== item.id);
      el.classList.remove("selected");
    } else {
      selected.push(item);
      el.classList.add("selected");
    }
    updateSelectedUI();
  }

  // 선택된 장비 UI 업데이트
  function updateSelectedUI() {
    const sec = document.getElementById("selected-section");
    const btn = document.getElementById("toStep2");
    if (selected.length === 0) {
      sec.classList.add("hidden");
      btn.classList.add("hidden");
    } else {
      sec.classList.remove("hidden");
      btn.classList.remove("hidden");
    }
    document.getElementById("selected-items").innerHTML =
      selected.map(s => `<li>${s.name}</li>`).join("");
  }
</script>
