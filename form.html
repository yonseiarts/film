<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>기자재 대여 - 대여일 선택</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script>
    function validateDateRange() {
      const startInput = document.getElementById('start-date');
      const endInput = document.getElementById('end-date');
      const errorText = document.getElementById('error-text');

      const startDate = new Date(startInput.value);
      const endDate = new Date(endInput.value);
      const maxDiff = 3; // 최대 3일

      if (startDate && endDate) {
        const timeDiff = endDate - startDate;
        const dayDiff = timeDiff / (1000 * 60 * 60 * 24);

        if (dayDiff < 0) {
          errorText.innerText = "⚠️ 반납일은 시작일보다 이후여야 합니다.";
          return false;
        } else if (dayDiff > maxDiff) {
          errorText.innerText = "⚠️ 대여는 최대 3일까지 가능합니다.";
          return false;
        } else {
          errorText.innerText = "";
          return true;
        }
      }
      return false;
    }

    function handleSubmit(e) {
      if (!validateDateRange()) {
        e.preventDefault(); // 제출 막기
      }
    }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- 헤더 -->
  <div class="bg-blue-700 text-white py-8 px-4">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-2xl font-bold mb-2">기자재 대여 예약</h1>
      <p class="text-blue-100">원하는 대여 시작일과 반납일을 선택해주세요.</p>
    </div>
  </div>

  <!-- 본문 -->
  <main class="max-w-3xl mx-auto py-12 px-4">
    <!-- 단계 표시 -->
    <div class="flex justify-between items-center mb-8">
      <div class="flex items-center space-x-2 text-gray-500">
        <div class="w-8 h-8 rounded-full bg-blue-700 text-white flex items-center justify-center font-bold">1</div>
        <span class="text-sm font-medium">장비 선택</span>
      </div>
      <div class="flex items-center space-x-2">
        <div class="w-8 h-8 rounded-full bg-blue-700 text-white flex items-center justify-center font-bold">2</div>
        <span class="text-sm font-medium">대여일 선택</span>
      </div>
      <div class="flex items-center space-x-2 text-gray-400">
        <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center font-bold text-white">3</div>
        <span class="text-sm font-medium">정보 입력</span>
      </div>
      <div class="flex items-center space-x-2 text-gray-400">
        <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center font-bold text-white">4</div>
        <span class="text-sm font-medium">완료</span>
      </div>
    </div>

    <!-- 제목 -->
    <h2 class="text-xl font-bold mb-4">대여일 선택</h2>
    <p class="text-gray-600 mb-6">일반 대여는 최대 <span class="font-medium text-blue-600">3일</span>까지 가능합니다.</p>

    <!-- 폼 -->
    <form action="complete.html" method="POST" class="bg-white p-6 rounded-lg shadow-md space-y-6" onsubmit="handleSubmit(event)">
      <div>
        <label for="start-date" class="block text-sm font-medium text-gray-700 mb-1">대여 시작일</label>
        <input type="date" id="start-date" name="start-date" required class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring focus:border-blue-500">
      </div>

      <div>
        <label for="end-date" class="block text-sm font-medium text-gray-700 mb-1">반납일</label>
        <input type="date" id="end-date" name="end-date" required class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring focus:border-blue-500">
        <p class="text-sm text-gray-400 mt-1">※ 반납일은 시작일 기준 최대 3일까지 가능합니다.</p>
        <p id="error-text" class="text-sm text-red-500 mt-1"></p>
      </div>

      <!-- 이동 버튼 -->
      <div class="flex justify-between items-center pt-6">
        <a href="rental_step1.html" class="text-blue-600 hover:underline text-sm">← 이전 단계</a>
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded">
          다음 단계 →
        </button>
      </div>
    </form>
  </main>
</body>
</html>
