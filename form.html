<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>기자재 대여 신청</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .selected {
      border-color: #FACC15;
      background-color: #FEFCE8;
    }
    .checkmark {
      display: none;
    }
    .selected .checkmark {
      display: inline-block;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="bg-blue-700 text-white p-6">
    <h1 class="text-2xl font-bold">기자재 대여 신청</h1>
    <p class="text-sm opacity-80">원하는 장비를 선택하고 날짜와 동의 절차를 진행해주세요.</p>
  </div>

  <div class="max-w-4xl mx-auto py-8 px-4">
    <!-- 단계 표시 -->
    <div class="flex justify-between mb-8 text-sm font-medium">
      <div class="text-blue-600">1. 장비 선택</div>
      <div id="step2-label" class="text-gray-400">2. 대여일 선택</div>
      <div id="step3-label" class="text-gray-400">3. 규정 동의</div>
    </div>

    <!-- 1단계: 장비 선택 -->
    <div id="step1">
      <h2 class="text-xl font-bold mb-4">1단계: 장비 선택</h2>
      <p class="mb-4 text-gray-600">아래에서 필요한 장비를 선택해주세요.</p>

      <div class="flex space-x-4 mb-4">
        <button class="tab-btn px-4 py-2 border rounded" data-tab="camera">카메라</button>
        <button class="tab-btn px-4 py-2 border rounded" data-tab="lighting">조명</button>
        <button class="tab-btn px-4 py-2 border rounded" data-tab="sound">사운드</button>
        <button class="tab-btn px-4 py-2 border rounded" data-tab="editing">편집실</button>
      </div>

      <div id="equipment-list" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"></div>

      <div id="selected-list" class="bg-white border rounded-lg p-4 hidden">
        <h2 class="font-semibold mb-2">선택된 장비</h2>
        <ul class="text-sm text-gray-700 space-y-1" id="selected-items"></ul>
      </div>

      <button onclick="goToStep(2)" id="to-step2" class="mt-6 px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 hidden">
        다음 단계 →
      </button>
    </div>

    <!-- 2단계: 날짜 + 증명사진 -->
    <div id="step2" class="hidden">
      <h2 class="text-xl font-bold mb-4">2단계: 대여일 선택 및 증명사진 제출</h2>

      <label class="block mb-2">대여 시작일</label>
      <input type="date" id="startDate" class="w-full border rounded p-2 mb-4" />

      <label class="block mb-2">반납일</label>
      <input type="date" id="endDate" class="w-full border rounded p-2 mb-4" />

      <label class="block mb-2">증명사진 업로드</label>
      <input type="file" id="photo" accept="image/*" class="w-full border rounded p-2 mb-4" />

      <div class="flex justify-between">
        <button onclick="goToStep(1)" class="text-blue-600">← 이전 단계</button>
        <button onclick="goToStep(3)" class="px-6 py-2 bg-blue-600 text-white rounded">다음 단계 →</button>
      </div>
    </div>

    <!-- 3단계: 규정 동의 -->
    <div id="step3" class="hidden">
      <h2 class="text-xl font-bold mb-4">3단계: 기자재 사용 규정 동의</h2>

      <div class="bg-gray-100 border p-4 mb-4 rounded text-sm leading-relaxed max-h-60 overflow-y-auto">
        <p class="mb-2"><strong>📅 대여 시간:</strong> 평일 10:00~17:00 (점심시간 12:00–13:00 대여 불가)</p>
        <p class="mb-2"><strong>⏱️ 대여 기간:</strong> 일반 대여: 최대 3일 / 특수 프로젝트: 최대 7일 (승인 필요)</p>
        <p class="mb-2"><strong>🎓 자격:</strong> 연세예술원 영화학과 재학생, 학생증 지참</p>
        <p class="mb-2"><strong>🔁 반납:</strong> 정해진 시간에 반납, 상태 확인 필수</p>
        <p class="mb-2"><strong>⚠️ 유의사항:</strong> 분실/파손 시 배상, 연체 시 대여 제한</p>
      </div>

      <label class="flex items-center mb-6">
        <input type="checkbox" id="agree" class="mr-2" />
        위 규정을 읽었으며, 이에 동의합니다.
      </label>

      <div class="flex justify-between">
        <button onclick="goToStep(2)" class="text-blue-600">← 이전 단계</button>
        <button onclick="alert('제출되었습니다!')" id="submitBtn" class="px-6 py-2 bg-blue-600 text-white rounded" disabled>
          제출
        </button>
      </div>
    </div>
  </div>

  <script>
    const equipmentData = {
      camera: [
        { id: "1", name: "Sony FX3", image: "https://via.placeholder.com/80", available: 3 },
        { id: "2", name: "Canon EOS R5", image: "https://via.placeholder.com/80", available: 2 },
      ],
      lighting: [
        { id: "3", name: "ARRI SkyPanel", image: "https://via.placeholder.com/80", available: 4 },
      ],
      sound: [
        { id: "4", name: "Sennheiser MKH416", image: "https://via.placeholder.com/80", available: 6 },
      ],
      editing: [
        { id: "5", name: "Premiere Pro", image: "https://via.placeholder.com/80", available: 2 },
      ]
    };

    let selected = [];

    function renderEquipment(category) {
      const list = document.getElementById("equipment-list");
      list.innerHTML = "";
      equipmentData[category].forEach(item => {
        const div = document.createElement("div");
        div.className = "border rounded-lg p-4 flex items-center justify-between cursor-pointer";
        div.dataset.id = item.id;
        div.innerHTML = `
          <div class="flex items-center">
            <img src="${item.image}" alt="" class="w-14 h-14 rounded mr-4" />
            <div>
              <h3 class="font-semibold">${item.name}</h3>
              <p class="text-sm text-gray-500">${item.available}대 대여 가능</p>
            </div>
          </div>
          <span class="checkmark text-yellow-500 text-lg">✔</span>
        `;
        div.addEventListener("click", () => toggleItem(item, div));
        list.appendChild(div);
      });
    }

    function toggleItem(item, el) {
      const found = selected.find(s => s.id === item.id);
      if (found) {
        selected = selected.filter(s => s.id !== item.id);
        el.classList.remove("selected");
      } else {
        selected.push(item);
        el.classList.add("selected");
      }
      updateSelected();
    }

    function updateSelected() {
      const list = document.getElementById("selected-items");
      const box = document.getElementById("selected-list");
      const btn = document.getElementById("to-step2");
      if (selected.length) {
        box.classList.remove("hidden");
        btn.classList.remove("hidden");
        list.innerHTML = selected.map(s => `<li>📌 ${s.name}</li>`).join("");
      } else {
        box.classList.add("hidden");
        btn.classList.add("hidden");
      }
    }

    document.querySelectorAll(".tab-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("bg-blue-100"));
        btn.classList.add("bg-blue-100");
        renderEquipment(btn.dataset.tab);
      });
    });

    document.getElementById("agree").addEventListener("change", e => {
      document.getElementById("submitBtn").disabled = !e.target.checked;
    });

    function goToStep(n) {
      for (let i = 1; i <= 3; i++) {
        document.getElementById(`step${i}`).classList.add("hidden");
        document.getElementById(`step${i}-label`)?.classList.remove("text-blue-600");
        document.getElementById(`step${i}-label`)?.classList.add("text-gray-400");
      }
      document.getElementById(`step${n}`).classList.remove("hidden");
      document.getElementById(`step${n}-label`)?.classList.add("text-blue-600");
    }

    renderEquipment("camera");
  </script>
</body>
</html>
